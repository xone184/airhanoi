import{c as d,r as n,R as qe,j as e,D as ce,X as _,d as k}from"./index-yOQadGY5.js";import{A as xe}from"./activity-pm6gW3mB.js";import{U as V}from"./users-NpzdLZHS.js";import{C as W}from"./clock-DZ7o-_QJ.js";import{R as he,C as Ke,X as Pe,Y as Be,T as me,a as Ve}from"./generateCategoricalChart-DrJ7HSJG.js";import{A as Xe}from"./AreaChart-K8SnQUGF.js";import{A as Qe}from"./Area-C2xlkOiX.js";import{P as Je,a as We}from"./PieChart-CgQNRzpt.js";import{F as pe}from"./filter-CbCjdpas.js";import{S as Ye}from"./search-ByhMcZZt.js";import{C as I}from"./check-circle-CnwME1O1.js";import{T as ue}from"./trash-2-CLwPCC7y.js";import{A as Y}from"./alert-circle-C_pwFBDG.js";import{R as Ze}from"./refresh-cw-Bh-XiNw_.js";import{M as Ge}from"./map-pin-eVO11afO.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=d("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=d("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=d("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=d("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=d("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=d("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=d("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=d("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=d("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=d("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=d("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=d("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=d("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=d("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=d("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=d("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),wt=({onRealtimeDataLoaded:y,onForecastDataLoaded:z,reports:u,onUpdateReportStatus:g,systemSettings:b,onSystemSettingsChange:c})=>{const[h,S]=n.useState("dashboard"),[ke,Ce]=n.useState({"dim_aqi_level.csv":{type:"dim",label:"Cấu hình chỉ số AQI",status:"missing",lastUpdate:"-"},"dim_district.csv":{type:"dim",label:"Danh mục Quận/Huyện",status:"missing",lastUpdate:"-"},"fact_forecast.csv":{type:"fact",label:"Dữ liệu Dự báo (7 ngày)",status:"missing",lastUpdate:"-"},"fact_realtime.csv":{type:"fact",label:"Dữ liệu Thời gian thực",status:"missing",lastUpdate:"-"}}),[ze,Se]=n.useState([{id:1,time:"10:42 AM",type:"info",msg:"System initialized successfully."},{id:2,time:"10:45 AM",type:"success",msg:"Connected to Open-Meteo API (Latency: 45ms)."},{id:3,time:"10:46 AM",type:"info",msg:"Database integrity check passed."},{id:4,time:"11:00 AM",type:"warning",msg:"High traffic detected on map module."}]),[o,M]=n.useState([]),[F,Me]=n.useState("all"),[E,Ue]=n.useState(""),[a,R]=n.useState(null),[O,U]=n.useState([]),[q,ee]=n.useState(null),[Q,Te]=n.useState(""),[J,$e]=n.useState("all"),[De,K]=n.useState(!1),[Ae,P]=n.useState(!1),[nt,it]=n.useState(null),[T,$]=n.useState({username:"",email:"",password:"",role:"user"}),[x,B]=n.useState({id:0,username:"",email:"",role:"user"}),[m,D]=n.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},type:"info"});qe.useEffect(()=>{(async()=>{try{const s=await k.getUsers();U(s),ee(null),i("success",`Đã tải ${s.length} người dùng từ CSDL`)}catch(s){console.error("Load users error:",s),ee("Không thể tải danh sách người dùng từ CSDL"),i("error","Không thể tải danh sách người dùng từ CSDL")}})()},[]);const i=(t,s)=>{const l=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});Se(p=>[{id:Date.now(),time:l,type:t,msg:s},...p])},[C,te]=n.useState(b.maintenanceMode),[se,ae]=n.useState(b.refreshInterval);n.useEffect(()=>{te(b.maintenanceMode),ae(b.refreshInterval)},[b]);const Le=async(t,s)=>{var p;const l=(p=s.target.files)==null?void 0:p[0];if(l){if(!l.name.endsWith(".csv")){i("error",`File ${l.name} không đúng định dạng .csv`);return}i("info",`Đang upload file ${t} lên server...`);try{let r="";if(t==="fact_realtime.csv")r="realtime";else if(t==="fact_forecast.csv")r="forecast";else{i("info",`File ${t} không cần upload (dimension table)`);return}const j="https://airhanoi.onrender.com/api",ie=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).token:null,de=new FormData;de.append("file",l);const oe=await fetch(`${j}/upload.php?type=${r}`,{method:"POST",headers:{Authorization:ie?`Bearer ${ie}`:""},body:de}),L=await oe.text();if(!L||!L.trim())throw new Error("Server không trả dữ liệu JSON (response rỗng). Kiểm tra lại cấu hình PHP/XAMPP hoặc file CSV.");let v;try{v=JSON.parse(L)}catch{throw console.error("Upload response không phải JSON hợp lệ:",L),new Error("Server trả dữ liệu không phải JSON hợp lệ. Chi tiết: "+L.substring(0,120))}if(!oe.ok||!v.success)throw new Error(v.error||"Upload failed");if(Ce(f=>({...f,[t]:{...f[t],status:"uploaded",lastUpdate:new Date().toLocaleString()}})),i("success",`Đã upload ${v.data.inserted||0} dòng dữ liệu ${r==="realtime"?"Realtime":"Forecast"} vào database.`),v.data.errors&&v.data.errors.length>0&&i("warning",`${v.data.errors_count||0} dòng có lỗi. Chi tiết: ${v.data.errors.join(", ")}`),r==="realtime")try{const w=await(await fetch(`${j}/air_quality.php?type=realtime`)).json();w.success&&w.data&&y(w.data)}catch(f){console.error("Failed to reload realtime data:",f)}else if(r==="forecast")try{const w=await(await fetch(`${j}/air_quality.php?type=forecast`)).json();w.success&&w.data&&z(w.data)}catch(f){console.error("Failed to reload forecast data:",f)}}catch(r){i("error",`Lỗi upload file ${t}: ${r.message||r}`),console.error("Upload error:",r)}}},N=n.useMemo(()=>u.filter(t=>{const s=F==="all"||t.status===F,l=!E||t.created_at.startsWith(E);return s&&l}).sort((t,s)=>new Date(s.created_at).getTime()-new Date(t.created_at).getTime()),[u,F,E]),_e=()=>{o.length===N.length?M([]):M(N.map(t=>t.report_id).filter(t=>t))},Ie=t=>{o.includes(t)?M(s=>s.filter(l=>l!==t)):M(s=>[...s,t])},le=t=>{if(o.length===0)return;confirm(`Xác nhận ${t==="verified"?"DUYỆT":"TỪ CHỐI"} ${o.length} báo cáo?`)&&(g(o,t),M([]),i("success",`Đã ${t==="verified"?"duyệt":"từ chối"} ${o.length} báo cáo.`))},re=t=>{if(a&&a.report_id){if(!confirm(`Bạn có chắc chắn muốn ${t==="verified"?"DUYỆT":"TỪ CHỐI"} báo cáo này không?`))return;g([a.report_id],t),i("success",`Đã ${t==="verified"?"duyệt":"từ chối"} báo cáo #${a.report_id}.`),R(null)}},ne=t=>{B({id:t.id,username:t.name,email:t.email,role:t.role}),P(!0)},He=async()=>{if(!x.username||!x.email){i("error","Vui lòng nhập đầy đủ thông tin");return}try{const t=await k.updateUserInfo(x.id,x.username,x.email,x.role);U(s=>s.map(l=>l.id===x.id?t:l)),P(!1),i("success",`Đã cập nhật thông tin user ID ${x.id}`)}catch(t){console.error("Update user error:",t),i("error",`Lỗi cập nhật: ${t.message}`)}},Fe=async(t,s)=>{let l=s==="ban"?"KHÓA":"MỞ KHÓA";D({isOpen:!0,title:`Xác nhận ${l}`,message:`Bạn có chắc chắn muốn ${l} tài khoản này không?`,type:s==="ban"?"warning":"info",onConfirm:async()=>{try{const p=await k.updateUser(t,s);U(r=>r.map(j=>j.id===t?p:j)),i("success",`Đã ${s==="ban"?"khóa":"mở khóa"} user ID ${t}`),D(r=>({...r,isOpen:!1}))}catch(p){console.error("Update user error:",p),i("error","Không thể cập nhật trạng thái người dùng")}}})},Ee=async()=>{const{username:t,email:s,password:l,role:p}=T;if(!t.trim()||!s.trim()||!l.trim()){alert("Vui lòng nhập đầy đủ Username, Email và Mật khẩu.");return}try{const r=await k.createUser({username:t.trim(),email:s.trim(),password:l,role:p});U(j=>[r,...j]),K(!1),$({username:"",email:"",password:"",role:"user"}),i("success",`Đã tạo người dùng mới: ${r.name}`)}catch(r){console.error("Create user error:",r),alert((r==null?void 0:r.message)||"Không thể tạo người dùng mới.")}},Re=async t=>{D({isOpen:!0,title:"Xác nhận XÓA",message:"Bạn có chắc chắn muốn XÓA hoàn toàn người dùng này? Hành động này không thể hoàn tác.",type:"danger",onConfirm:async()=>{try{await k.deleteUser(t),U(s=>s.filter(l=>l.id!==t)),i("warning",`Đã xóa người dùng ID ${t}`),D(s=>({...s,isOpen:!1}))}catch(s){console.error("Delete user error:",s),i("error",`Lỗi xóa người dùng: ${s.message}`)}}})},A=n.useMemo(()=>{const t={pending:0,verified:0,rejected:0};return u.forEach(s=>{s.status==="pending"?t.pending++:s.status==="verified"?t.verified++:s.status==="rejected"&&t.rejected++}),[{name:"Chờ duyệt",value:t.pending,color:"#facc15"},{name:"Đã duyệt",value:t.verified,color:"#22c55e"},{name:"Từ chối",value:t.rejected,color:"#ef4444"}]},[u]),Oe=[{time:"00:00",users:120,apiCalls:450},{time:"04:00",users:80,apiCalls:300},{time:"08:00",users:450,apiCalls:1200},{time:"12:00",users:900,apiCalls:2500},{time:"16:00",users:750,apiCalls:2100},{time:"20:00",users:500,apiCalls:1500},{time:"23:59",users:200,apiCalls:600}];return e.jsxs("div",{className:"flex h-full animate-fade-in relative bg-slate-950",children:[e.jsxs("div",{className:"w-64 bg-slate-900 border-r border-slate-800 flex flex-col p-4 space-y-2 flex-shrink-0",children:[e.jsxs("div",{className:"mb-6 px-2",children:[e.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(je,{className:"text-blue-500",size:20}),"Admin Center"]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Trung tâm quản trị hệ thống"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"px-3 text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 mt-4",children:"Tổng quan"}),e.jsx(H,{id:"dashboard",icon:e.jsx(xe,{size:18}),label:"Dashboard",active:h,onClick:S}),e.jsx(H,{id:"system",icon:e.jsx(ve,{size:18}),label:"Hệ thống",active:h,onClick:S}),e.jsx("p",{className:"px-3 text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 mt-4",children:"Quản lý"}),e.jsx(H,{id:"users",icon:e.jsx(V,{size:18}),label:"Người dùng",active:h,onClick:S}),e.jsx(H,{id:"moderation",icon:e.jsx(ye,{size:18}),label:"Kiểm duyệt tin",active:h,onClick:S,badge:A[0].value}),e.jsx("p",{className:"px-3 text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 mt-4",children:"Dữ liệu"}),e.jsx(H,{id:"data",icon:e.jsx(ce,{size:18}),label:"Kho dữ liệu",active:h,onClick:S})]})]}),e.jsxs("div",{className:"flex-1 p-4 lg:p-6 overflow-y-auto custom-scrollbar",children:[h==="dashboard"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Tổng Quan Hệ Thống"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("span",{className:"px-3 py-1 bg-green-500/10 text-green-400 border border-green-500/20 rounded-full text-xs font-bold flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"System Online"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(X,{title:"Tổng Báo Cáo",value:u.length,icon:e.jsx(G,{size:24}),color:"text-blue-400",bg:"bg-blue-500/10",trend:"+12% tuần này"}),e.jsx(X,{title:"Chờ Duyệt",value:A[0].value,icon:e.jsx(W,{size:24}),color:"text-yellow-400",bg:"bg-yellow-500/10"}),e.jsx(X,{title:"Người Dùng",value:O.length,icon:e.jsx(V,{size:24}),color:"text-purple-400",bg:"bg-purple-500/10",trend:"+5 mới hôm nay"}),e.jsx(X,{title:"API Requests",value:"24.5k",icon:e.jsx(rt,{size:24}),color:"text-emerald-400",bg:"bg-emerald-500/10",trend:"99.9% Success"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2 bg-slate-900 rounded-xl border border-slate-800 p-6 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(xe,{size:18,className:"text-blue-500"})," Traffic & Tải Hệ Thống"]}),e.jsx("div",{className:"h-72",children:e.jsx(he,{width:"100%",height:"100%",children:e.jsxs(Xe,{data:Oe,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorApi",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),e.jsx(Ke,{strokeDasharray:"3 3",stroke:"#1e293b",vertical:!1}),e.jsx(Pe,{dataKey:"time",stroke:"#64748b",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(Be,{stroke:"#64748b",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(me,{contentStyle:{backgroundColor:"#0f172a",borderColor:"#334155",color:"#fff"}}),e.jsx(Qe,{type:"monotone",dataKey:"apiCalls",stroke:"#3b82f6",strokeWidth:2,fillOpacity:1,fill:"url(#colorApi)"})]})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6 shadow-lg",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[e.jsx(ve,{size:16})," Server Resources"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsxs("span",{className:"text-slate-300 flex items-center gap-1",children:[e.jsx(et,{size:12})," CPU Usage"]}),e.jsx("span",{className:"text-green-400 font-bold",children:"12%"})]}),e.jsx("div",{className:"w-full bg-slate-800 rounded-full h-1.5",children:e.jsx("div",{className:"bg-green-500 h-1.5 rounded-full",style:{width:"12%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsxs("span",{className:"text-slate-300 flex items-center gap-1",children:[e.jsx(tt,{size:12})," RAM Usage"]}),e.jsx("span",{className:"text-blue-400 font-bold",children:"45%"})]}),e.jsx("div",{className:"w-full bg-slate-800 rounded-full h-1.5",children:e.jsx("div",{className:"bg-blue-500 h-1.5 rounded-full",style:{width:"45%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsxs("span",{className:"text-slate-300 flex items-center gap-1",children:[e.jsx(ce,{size:12})," Disk Space"]}),e.jsx("span",{className:"text-purple-400 font-bold",children:"28%"})]}),e.jsx("div",{className:"w-full bg-slate-800 rounded-full h-1.5",children:e.jsx("div",{className:"bg-purple-500 h-1.5 rounded-full",style:{width:"28%"}})})]})]})]}),e.jsxs("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6 shadow-lg flex-1",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-4",children:"Tỷ lệ duyệt báo cáo"}),e.jsx("div",{className:"h-40",children:e.jsx(he,{width:"100%",height:"100%",children:e.jsxs(Je,{children:[e.jsx(We,{data:A,dataKey:"value",innerRadius:40,outerRadius:60,paddingAngle:5,children:A.map((t,s)=>e.jsx(Ve,{fill:t.color},`cell-${s}`))}),e.jsx(me,{contentStyle:{backgroundColor:"#0f172a",borderRadius:"8px",border:"1px solid #334155"}})]})})}),e.jsx("div",{className:"flex justify-center gap-4 text-xs",children:A.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:t.color}}),e.jsx("span",{className:"text-slate-300",children:t.name})]},s))})]})]})]})]}),h==="users"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Quản Lý Người Dùng"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:q||`Đang hiển thị ${O.length} người dùng từ CSDL`})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(pe,{className:"absolute left-3 top-2.5 text-slate-500",size:16}),e.jsxs("select",{className:"bg-slate-900 border border-slate-700 rounded-lg py-2 pl-10 pr-8 text-white text-sm focus:border-blue-500 outline-none appearance-none cursor-pointer hover:bg-slate-800 transition-colors",value:J,onChange:t=>$e(t.target.value),children:[e.jsx("option",{value:"all",children:"Tất cả trạng thái"}),e.jsx("option",{value:"active",children:"Hoạt động"}),e.jsx("option",{value:"banned",children:"Đã khóa"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{className:"absolute left-3 top-2.5 text-slate-500",size:16}),e.jsx("input",{type:"text",className:"bg-slate-900 border border-slate-700 rounded-lg py-2 pl-10 pr-4 text-white text-sm focus:border-blue-500 outline-none w-64 focus:w-72 transition-all",placeholder:"Tìm theo tên hoặc email...",value:Q,onChange:t=>Te(t.target.value)})]}),e.jsxs("button",{onClick:()=>K(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white text-invariant-white rounded-lg text-sm font-semibold flex items-center gap-2 shadow-lg shadow-blue-900/20 active:scale-95 transition-all",children:[e.jsx(V,{size:16})," Thêm người dùng"]})]})]}),e.jsx("div",{className:"bg-slate-900 rounded-xl border border-slate-800 overflow-hidden shadow-lg",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-950 text-slate-400 text-xs font-bold uppercase tracking-wider",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"User Info"}),e.jsx("th",{className:"p-4",children:"Role"}),e.jsx("th",{className:"p-4",children:"Status"}),e.jsx("th",{className:"p-4",children:"Joined Date"}),e.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-800",children:[O.filter(t=>{const s=t.name.toLowerCase().includes(Q.toLowerCase())||t.email.includes(Q),l=J==="all"||t.status===J;return s&&l}).map(t=>e.jsxs("tr",{className:"hover:bg-slate-800/50 transition-colors",children:[e.jsxs("td",{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center text-slate-300 font-bold border border-slate-700",children:t.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-white text-sm",children:t.name}),e.jsx("p",{className:"text-xs text-slate-500",children:t.email})]})]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${t.role==="admin"?"bg-purple-500/10 text-purple-400 border border-purple-500/20":"bg-blue-500/10 text-blue-400 border border-blue-500/20"}`,children:t.role})}),e.jsx("td",{className:"p-4",children:e.jsxs("span",{className:`px-2 py-1 rounded text-xs font-bold flex items-center gap-1 w-fit ${t.status==="active"?"text-green-400":"text-red-400"}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${t.status==="active"?"bg-green-400":"bg-red-400"}`}),t.status]})}),e.jsx("td",{className:"p-4 text-sm text-slate-400",children:t.joined}),e.jsx("td",{className:"p-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[t.role!=="admin"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Fe(t.id,t.status==="active"?"ban":"activate"),className:`p-2 rounded-lg transition-colors ${t.status==="active"?"hover:bg-red-500/20 text-red-400":"hover:bg-green-500/20 text-green-400"}`,title:t.status==="active"?"Khóa tài khoản":"Mở khóa tài khoản",children:t.status==="active"?e.jsx(je,{size:16}):e.jsx(I,{size:16})}),e.jsx("button",{onClick:()=>ne(t),className:"p-2 hover:bg-blue-500/20 text-blue-400 rounded-lg transition-colors",title:"Chỉnh sửa thông tin",children:e.jsx(we,{size:16})}),e.jsx("button",{onClick:()=>Re(t.id),className:"p-2 hover:bg-red-600/20 text-red-400 rounded-lg transition-colors",title:"Xóa người dùng",children:e.jsx(ue,{size:16})})]}),e.jsx("button",{onClick:t.role==="admin"?()=>ne(t):void 0,className:`p-2 rounded-lg transition-colors ${t.role==="admin"?"hover:bg-purple-500/20 text-purple-400":"hover:bg-slate-700 text-slate-400 cursor-default"}`,title:"Thông tin chi tiết",children:t.role==="admin"?e.jsx(we,{size:16}):e.jsx(be,{size:16})})]})})]},t.id)),O.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-center text-slate-500 text-sm",colSpan:5,children:q||"Không có người dùng nào trong hệ thống."})})]})]})})]}),h==="moderation"&&e.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Kiểm Duyệt Báo Cáo"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Quản lý các tin báo từ người dùng"})]}),e.jsx("div",{className:"flex gap-2",children:o.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>le("verified"),className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg font-bold flex items-center gap-2 text-sm transition-all animate-fade-in text-invariant-white",children:[e.jsx(I,{size:16})," Duyệt (",o.length,")"]}),e.jsxs("button",{onClick:()=>le("rejected"),className:"px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg font-bold flex items-center gap-2 text-sm transition-all animate-fade-in text-invariant-white",children:[e.jsx(ue,{size:16})," Từ chối (",o.length,")"]})]})})]}),e.jsxs("div",{className:"bg-slate-900 p-4 rounded-xl border border-slate-800 flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-300 text-sm",children:[e.jsx(pe,{size:16})," ",e.jsx("span",{className:"font-bold",children:"Bộ lọc:"})]}),e.jsxs("select",{className:"bg-slate-800 border border-slate-700 text-white text-sm rounded-lg px-3 py-2 outline-none focus:border-blue-500",value:F,onChange:t=>Me(t.target.value),children:[e.jsx("option",{value:"all",children:"Tất cả trạng thái"}),e.jsx("option",{value:"pending",children:"Chờ duyệt"}),e.jsx("option",{value:"verified",children:"Đã duyệt"}),e.jsx("option",{value:"rejected",children:"Đã từ chối"})]}),e.jsx("input",{type:"date",className:"bg-slate-800 border border-slate-700 text-white text-sm rounded-lg px-3 py-2 outline-none focus:border-blue-500",value:E,onChange:t=>Ue(t.target.value)}),o.length>0&&e.jsxs("span",{className:"ml-auto text-sm text-blue-400 font-medium",children:["Đang chọn ",o.length," dòng"]})]}),e.jsxs("div",{className:"bg-slate-900 rounded-xl border border-slate-800 overflow-hidden flex-1 flex flex-col shadow-lg",children:[e.jsx("div",{className:"overflow-auto flex-1",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-slate-950 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 border-b border-slate-800 w-12",children:e.jsx("button",{onClick:_e,className:"text-slate-400 hover:text-white",children:o.length===N.length&&N.length>0?e.jsx(ge,{size:20,className:"text-blue-500"}):e.jsx(Ne,{size:20})})}),e.jsx("th",{className:"p-4 border-b border-slate-800 text-xs font-bold text-slate-400 uppercase",children:"Thời gian"}),e.jsx("th",{className:"p-4 border-b border-slate-800 text-xs font-bold text-slate-400 uppercase",children:"Khu vực"}),e.jsx("th",{className:"p-4 border-b border-slate-800 text-xs font-bold text-slate-400 uppercase",children:"Nội dung"}),e.jsx("th",{className:"p-4 border-b border-slate-800 text-xs font-bold text-slate-400 uppercase",children:"Trạng thái"}),e.jsx("th",{className:"p-4 border-b border-slate-800 text-xs font-bold text-slate-400 uppercase text-right",children:"Thao tác"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-800/50",children:N.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-8 text-center text-slate-500",children:"Không tìm thấy báo cáo nào."})}):N.map(t=>e.jsxs("tr",{className:`hover:bg-slate-800/80 transition-colors ${o.includes(t.report_id)?"bg-blue-900/10":""}`,children:[e.jsx("td",{className:"p-4",children:e.jsx("button",{onClick:()=>Ie(t.report_id),className:"text-slate-400",children:o.includes(t.report_id)?e.jsx(ge,{size:20,className:"text-blue-500"}):e.jsx(Ne,{size:20})})}),e.jsxs("td",{className:"p-4 text-sm text-slate-300 font-mono",children:[new Date(t.created_at).toLocaleDateString("vi-VN"),e.jsx("br",{}),new Date(t.created_at).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("td",{className:"p-4 text-sm text-white font-medium",children:[t.district,e.jsx("div",{className:"text-xs text-slate-500 font-normal mt-0.5",children:t.address})]}),e.jsxs("td",{className:"p-4",children:[e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded border mb-1 inline-block
                                                        ${t.type==="burning"?"border-red-500/30 text-red-400 bg-red-500/10":t.type==="construction"?"border-orange-500/30 text-orange-400 bg-orange-500/10":"border-blue-500/30 text-blue-400 bg-blue-500/10"}`,children:t.type==="other"?(t.customType||"Khác").toUpperCase():t.type.toUpperCase()}),e.jsx("p",{className:"text-sm text-slate-300 line-clamp-2",children:t.description})]}),e.jsxs("td",{className:"p-4",children:[t.status==="pending"&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-yellow-500/10 text-yellow-500 text-xs font-bold",children:[e.jsx(W,{size:12})," Chờ duyệt"]}),t.status==="verified"&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-500/10 text-green-500 text-xs font-bold",children:[e.jsx(I,{size:12})," Đã duyệt"]}),t.status==="rejected"&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-red-500/10 text-red-500 text-xs font-bold",children:[e.jsx(Y,{size:12})," Từ chối"]})]}),e.jsxs("td",{className:"p-4 text-right space-x-2",children:[e.jsx("button",{onClick:()=>R(t),className:"p-1.5 rounded bg-blue-600/20 text-blue-400 hover:bg-blue-600 hover:text-white transition-colors",title:"Xem chi tiết",children:e.jsx(be,{size:16})}),t.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>g([t.report_id],"verified"),className:"p-1.5 rounded bg-green-600/20 text-green-400 hover:bg-green-600 hover:text-white transition-colors",title:"Duyệt",children:e.jsx(Z,{size:16})}),e.jsx("button",{onClick:()=>g([t.report_id],"rejected"),className:"p-1.5 rounded bg-red-600/20 text-red-400 hover:bg-red-600 hover:text-white transition-colors",title:"Từ chối",children:e.jsx(_,{size:16})})]})]})]},t.report_id))})]})}),e.jsxs("div",{className:"bg-slate-900 p-3 text-xs text-slate-500 text-center border-t border-slate-800",children:["Hiển thị ",N.length," kết quả"]})]})]}),h==="data"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Quản Lý Dữ Liệu Nguồn"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-bold text-slate-300",children:"File CSV (Import)"}),Object.entries(ke).map(([t,s])=>e.jsxs("div",{className:"bg-slate-900 rounded-xl p-4 border border-slate-800 hover:border-blue-500/30 transition-all flex justify-between items-center group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-slate-800 rounded-lg text-slate-400 group-hover:text-blue-400 transition-colors",children:e.jsx(G,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-200 text-sm",children:s.label}),e.jsx("p",{className:"text-xs text-slate-500 font-mono mt-1",children:t})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[s.status==="uploaded"&&e.jsxs("span",{className:"text-xs text-green-500 font-bold flex items-center gap-1",children:[e.jsx(Z,{size:12})," Updated"]}),e.jsxs("label",{className:"cursor-pointer px-3 py-2 bg-blue-600 hover:bg-blue-500 text-white text-invariant-white text-xs font-bold rounded-lg transition-colors flex items-center gap-2",children:[e.jsx("input",{type:"file",accept:".csv",className:"hidden",onChange:l=>Le(t,l)}),e.jsx(lt,{size:14})," Upload"]})]})]},t))]}),e.jsxs("div",{className:"bg-slate-900 rounded-xl p-0 border border-slate-800 h-fit overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-slate-800 bg-slate-950 flex justify-between items-center",children:[e.jsxs("h3",{className:"font-bold text-slate-300 flex items-center gap-2",children:[e.jsx(at,{size:16})," System Logs"]}),e.jsxs("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"})," Live"]})]}),e.jsx("div",{className:"space-y-0 max-h-[400px] overflow-y-auto custom-scrollbar p-0 bg-slate-950 font-mono text-xs",children:ze.map(t=>e.jsxs("div",{className:"p-3 border-b border-slate-800/50 hover:bg-slate-900/50 transition-colors flex gap-3",children:[e.jsxs("span",{className:"text-slate-500 shrink-0 opacity-70",children:["[",t.time,"]"]}),e.jsx("span",{className:t.type==="success"?"text-green-400":t.type==="error"?"text-red-400":t.type==="warning"?"text-yellow-400":"text-blue-300",children:t.msg})]},t.id))})]})]})]}),h==="system"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Cấu Hình Hệ Thống"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-900 p-6 rounded-xl border border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-red-500/10 text-red-400 rounded-lg",children:e.jsx(st,{size:20})}),e.jsx("h3",{className:"font-bold text-white",children:"Chế độ bảo trì"})]}),e.jsx("p",{className:"text-slate-400 text-sm mb-4",children:"Khi bật, chỉ Admin mới có thể truy cập hệ thống. Người dùng sẽ thấy trang thông báo bảo trì."}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:async()=>{const t=!C;if(confirm(t?"Bật chế độ bảo trì?":"Tắt chế độ bảo trì?"))try{await k.updateSystemSettings({maintenanceMode:t}),te(t),c({maintenanceMode:t,refreshInterval:se}),i(t?"warning":"success",t?"Đã bật chế độ bảo trì":"Đã tắt chế độ bảo trì"),alert(t?"Đã bật chế độ bảo trì":"Đã tắt chế độ bảo trì")}catch(s){console.error("Update maintenance error:",s),alert("Không thể cập nhật chế độ bảo trì")}},className:`relative inline-block w-12 h-6 transition duration-200 ease-in-out rounded-full cursor-pointer ${C?"bg-red-500/70":"bg-slate-700"}`,children:e.jsx("span",{className:`inline-block w-6 h-6 transform bg-white rounded-full shadow transition duration-200 ease-in-out ${C?"translate-x-6":"translate-x-0"}`})}),e.jsx("span",{className:`text-sm font-bold ${C?"text-red-400":"text-slate-500"}`,children:C?"Đang Bật":"Đang Tắt"})]})]}),e.jsxs("div",{className:"bg-slate-900 p-6 rounded-xl border border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 text-blue-400 rounded-lg",children:e.jsx(Ze,{size:20})}),e.jsx("h3",{className:"font-bold text-white",children:"Tần suất làm mới dữ liệu"})]}),e.jsx("p",{className:"text-slate-400 text-sm mb-4",children:"Cấu hình khoảng thời gian tự động cập nhật dữ liệu từ các trạm quan trắc."}),e.jsxs("select",{className:"bg-slate-950 border border-slate-700 text-white text-sm rounded-lg px-3 py-2 w-full outline-none focus:border-blue-500",value:se,onChange:async t=>{const s=t.target.value;try{await k.updateSystemSettings({refreshInterval:s}),ae(s),c({maintenanceMode:C,refreshInterval:s}),i("info",`Đã đổi tần suất làm mới: ${s}`),alert(`Đã đổi tần suất làm mới: ${s}`)}catch(l){console.error("Update refresh interval error:",l),alert("Không thể cập nhật tần suất làm mới")}},children:[e.jsx("option",{value:"15m",children:"Mỗi 15 phút (Mặc định)"}),e.jsx("option",{value:"30m",children:"Mỗi 30 phút"}),e.jsx("option",{value:"60m",children:"Mỗi 1 giờ"}),e.jsx("option",{value:"off",children:"Tắt tự động cập nhật"})]})]})]})]})]}),De&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-950/80 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-2xl w-full max-w-md p-6 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Thêm người dùng mới"}),e.jsx("button",{onClick:()=>K(!1),className:"text-slate-400 hover:text-white",children:e.jsx(_,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Username"}),e.jsx("input",{type:"text",className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-white focus:border-blue-500 outline-none",value:T.username,onChange:t=>$(s=>({...s,username:t.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-white focus:border-blue-500 outline-none",value:T.email,onChange:t=>$(s=>({...s,email:t.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Mật khẩu tạm"}),e.jsx("input",{type:"password",className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-white focus:border-blue-500 outline-none",value:T.password,onChange:t=>$(s=>({...s,password:t.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Quyền"}),e.jsxs("select",{className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-white focus:border-blue-500 outline-none",value:T.role,onChange:t=>$(s=>({...s,role:t.target.value})),children:[e.jsx("option",{value:"user",children:"USER"}),e.jsx("option",{value:"admin",children:"ADMIN"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>K(!1),className:"px-4 py-2 rounded-lg bg-slate-700 text-white hover:bg-slate-600 text-sm font-semibold",children:"Hủy"}),e.jsx("button",{onClick:Ee,className:"px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-500 text-white text-sm font-semibold",children:"Tạo người dùng"})]})]})}),a&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-950/80 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-700 w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden animate-fade-in-up flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-6 border-b border-slate-800 flex justify-between items-center bg-slate-800/50",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(G,{size:20,className:"text-blue-400"})," Chi Tiết Báo Cáo #",a.report_id]}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:new Date(a.created_at).toLocaleString("vi-VN")})]}),e.jsx("button",{onClick:()=>R(null),className:"text-slate-400 hover:text-white transition-colors bg-slate-800 p-2 rounded-full hover:bg-slate-700",children:e.jsx(_,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700/50",children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-500 uppercase mb-3 flex items-center gap-2",children:[e.jsx(V,{size:14})," Người báo cáo"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center font-bold text-slate-300",children:["#",a.user_id]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-white font-medium",children:["User ID: ",a.user_id]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Thành viên cộng đồng"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700/50",children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-500 uppercase mb-3 flex items-center gap-2",children:[e.jsx(Ge,{size:14})," Địa điểm"]}),e.jsx("p",{className:"text-blue-400 font-bold text-lg mb-1",children:a.district}),e.jsx("p",{className:"text-slate-300 text-sm",children:a.address})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase mb-3",children:"Nội dung phản ánh"}),e.jsxs("div",{className:"bg-slate-800 p-5 rounded-xl border border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:`px-3 py-1 rounded-lg text-sm font-bold border
                                            ${a.type==="burning"?"border-red-500/30 text-red-400 bg-red-500/10":a.type==="construction"?"border-orange-500/30 text-orange-400 bg-orange-500/10":"border-blue-500/30 text-blue-400 bg-blue-500/10"}`,children:a.type==="other"?(a.customType||"Khác").toUpperCase():a.type.toUpperCase()}),e.jsxs("span",{className:`px-3 py-1 rounded-lg text-sm font-bold border flex items-center gap-1
                                             ${a.status==="verified"?"border-green-500/30 text-green-400 bg-green-500/10":a.status==="rejected"?"border-red-500/30 text-red-400 bg-red-500/10":"border-yellow-500/30 text-yellow-400 bg-yellow-500/10"}`,children:[a.status==="pending"&&e.jsx(W,{size:14}),a.status==="verified"&&e.jsx(I,{size:14}),a.status==="rejected"&&e.jsx(Y,{size:14}),a.status==="pending"?"Chờ duyệt":a.status==="verified"?"Đã duyệt":"Đã từ chối"]})]}),e.jsx("p",{className:"text-slate-200 leading-relaxed whitespace-pre-wrap",children:a.description})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-500 uppercase mb-3 flex items-center gap-2",children:[e.jsx(fe,{size:14})," Hình ảnh bằng chứng"]}),e.jsx("div",{className:"w-full h-48 bg-slate-800 rounded-xl border border-slate-700 border-dashed flex items-center justify-center flex-col gap-2",children:a.image_url?e.jsx("img",{src:a.image_url.startsWith("http")?a.image_url:"https://airhanoi.onrender.com/api".replace(/\/api\/?$/,"")+"/"+a.image_url,alt:"Evidence",className:"h-full w-full object-contain rounded-xl",onError:t=>{t.target.src="https://placehold.co/600x400?text=Image+Not+Found"}}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-12 h-12 bg-slate-700 rounded-full flex items-center justify-center text-slate-500",children:e.jsx(fe,{size:24})}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Người dùng không tải lên hình ảnh"})]})})]})]}),e.jsx("div",{className:"p-6 border-t border-slate-800 bg-slate-800/30 flex justify-end gap-3 mt-auto",children:a.status==="pending"?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>re("rejected"),className:"px-5 py-2.5 rounded-xl bg-red-600/10 text-red-400 hover:bg-red-600 hover:text-white border border-red-600/20 font-bold transition-all flex items-center gap-2",children:[e.jsx(_,{size:18})," Từ chối"]}),e.jsxs("button",{onClick:()=>re("verified"),className:"px-5 py-2.5 rounded-xl bg-green-600 hover:bg-green-500 text-white text-invariant-white shadow-lg shadow-green-900/20 font-bold transition-all flex items-center gap-2",children:[e.jsx(Z,{size:18})," Duyệt báo cáo"]})]}):e.jsx("button",{onClick:()=>R(null),className:"px-5 py-2.5 rounded-xl bg-slate-700 text-white text-invariant-white hover:bg-slate-600 font-bold transition-all",children:"Đóng cửa sổ"})})]})}),Ae&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-950/80 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-2xl w-full max-w-md p-6 shadow-2xl animate-fade-in-up",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Chỉnh sửa thông tin"}),e.jsx("button",{onClick:()=>P(!1),className:"text-slate-400 hover:text-white",children:e.jsx(_,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Username"}),e.jsx("input",{type:"text",className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-white focus:border-blue-500 outline-none",value:x.username,onChange:t=>B(s=>({...s,username:t.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-white focus:border-blue-500 outline-none",value:x.email,onChange:t=>B(s=>({...s,email:t.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Quyền hạn"}),e.jsxs("select",{className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-white focus:border-blue-500 outline-none",value:x.role,onChange:t=>B(s=>({...s,role:t.target.value})),children:[e.jsx("option",{value:"user",children:"USER (Người dùng thường)"}),e.jsx("option",{value:"admin",children:"ADMIN (Quản trị viên)"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 rounded-lg bg-slate-700 text-white hover:bg-slate-600 text-sm font-semibold transition-colors",children:"Hủy"}),e.jsx("button",{onClick:He,className:"px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-500 text-white text-sm font-semibold transition-colors shadow-lg shadow-blue-900/20",children:"Lưu thay đổi"})]})]})}),m.isOpen&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-950/90 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-2xl w-full max-w-sm p-6 shadow-2xl animate-scale-in",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:`p-3 rounded-full ${m.type==="danger"?"bg-red-500/10 text-red-500":m.type==="warning"?"bg-orange-500/10 text-orange-500":"bg-blue-500/10 text-blue-500"}`,children:m.type==="danger"?e.jsx(ye,{size:24}):m.type==="warning"?e.jsx(Y,{size:24}):e.jsx(I,{size:24})}),e.jsx("h3",{className:"text-lg font-bold text-white",children:m.title})]}),e.jsx("p",{className:"text-slate-300 text-sm mb-6 leading-relaxed",children:m.message}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>D(t=>({...t,isOpen:!1})),className:"px-4 py-2 rounded-lg bg-slate-800 text-slate-300 hover:bg-slate-700 text-sm font-bold transition-colors",children:"Hủy bỏ"}),e.jsx("button",{onClick:m.onConfirm,className:`px-4 py-2 rounded-lg text-white text-sm font-bold transition-colors shadow-lg ${m.type==="danger"?"bg-red-600 hover:bg-red-500 shadow-red-900/20":m.type==="warning"?"bg-orange-600 hover:bg-orange-500 shadow-orange-900/20":"bg-blue-600 hover:bg-blue-500 shadow-blue-900/20"}`,children:"Xác nhận"})]})]})})]})},H=({id:y,icon:z,label:u,active:g,onClick:b,badge:c})=>e.jsxs("button",{onClick:()=>b(y),className:`w-full flex items-center justify-between p-3 rounded-xl transition-all mb-1 group
            ${g===y?"bg-blue-600 text-white shadow-lg shadow-blue-900/20":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:g===y?"text-white":"text-slate-500 group-hover:text-white",children:z}),e.jsx("span",{className:"font-medium text-sm",children:u})]}),c&&c>0&&e.jsx("span",{className:"bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-md shadow-sm",children:c})]}),X=({title:y,value:z,icon:u,color:g,bg:b,trend:c})=>e.jsxs("div",{className:"bg-slate-900 rounded-xl p-6 border border-slate-800 shadow-lg relative overflow-hidden group hover:border-slate-700 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider mb-1",children:y}),e.jsx("h3",{className:"text-2xl font-black text-white",children:z})]}),e.jsx("div",{className:`p-3 rounded-xl ${b} ${g}`,children:u})]}),c&&e.jsx("p",{className:`text-xs font-medium ${c.includes("+")||c.includes("Success")?"text-green-400":"text-slate-500"}`,children:c})]});export{wt as default};
