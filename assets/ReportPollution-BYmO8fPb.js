import{c as m,r as i,j as e,H as z,X as V}from"./index-_T7_exxy.js";import{A as b}from"./alert-triangle-DSUMrw7H.js";import{M}from"./map-pin-DVcYsgKB.js";import{C as w}from"./check-circle-B9OicOOk.js";import{S as P}from"./send-B0XEmnkp.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=m("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=m("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=m("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),q=({onSubmitReport:p})=>{const[s,o]=i.useState({district:"Ba ƒê√¨nh",address:"",type:"burning",customType:"",description:""}),[c,x]=i.useState(null),[l,g]=i.useState(!1),[f,n]=i.useState(""),[j,v]=i.useState(""),[k,h]=i.useState(!1),y=i.useRef(null),C=t=>{var d;const a=(d=t.target.files)==null?void 0:d[0];if(a){const r=["image/jpeg","image/png","image/webp","image/gif","video/mp4","video/quicktime","video/webm","video/x-matroska","video/avi","video/mpeg","video/3gpp"].includes(a.type),N=/\.(jpg|jpeg|png|webp|gif|mp4|mov|webm|mkv|avi|mpeg|3gp)$/i.test(a.name);if(!r&&!N){n("ƒê·ªãnh d·∫°ng file kh√¥ng h·ª£p l·ªá. H·ªó tr·ª£ ·∫£nh (JPG, PNG, GIF) v√† video (MP4, MOV, AVI, MKV...).");return}if(a.size>50*1024*1024){n("K√≠ch th∆∞·ªõc file qu√° l·ªõn. T·ªëi ƒëa 50MB.");return}x(a),n("")}},T=t=>{if(t.preventDefault(),n(""),v(""),!s.address.trim()){n("Vui l√≤ng nh·∫≠p ƒë·ªãa ch·ªâ c·ª• th·ªÉ.");return}if(s.type==="other"&&!s.customType.trim()){n("Vui l√≤ng nh·∫≠p chi ti·∫øt lo·∫°i h√¨nh √¥ nhi·ªÖm.");return}if(s.description.trim().length<10){n("M√¥ t·∫£ c·∫ßn chi ti·∫øt h∆°n (t·ªëi thi·ªÉu 10 k√Ω t·ª±).");return}if(!c){n("Vui l√≤ng t·∫£i l√™n h√¨nh ·∫£nh ho·∫∑c video b·∫±ng ch·ª©ng.");return}h(!0)},S=async()=>{h(!1),g(!0);const t=new FormData;t.append("district",s.district),t.append("address",s.address),t.append("type",s.type),t.append("customType",s.customType),t.append("description",s.description),t.append("evidence",c),t.append("user_id","2");try{const d=await fetch("https://airhanoi.onrender.com/api/submit_report.php",{method:"POST",body:t}),u=await d.text();let r;try{r=JSON.parse(u)}catch{throw console.error("Parsed Response Text:",u),new Error("Ph·∫£n h·ªìi t·ª´ server kh√¥ng h·ª£p l·ªá. Vui l√≤ng ki·ªÉm tra console.")}if(!d.ok||!r.success)throw new Error(r.error||"C√≥ l·ªói x·∫£y ra khi g·ª≠i b√°o c√°o.");v("C·∫£m ∆°n! B√°o c√°o c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c g·ª≠i th√†nh c√¥ng v√† ƒëang ch·ªù duy·ªát."),o({district:"Ba ƒê√¨nh",address:"",type:"burning",customType:"",description:""}),x(null),p&&r.data&&p(r.data)}catch(a){console.error(a),n(a.message||"Kh√¥ng th·ªÉ k·∫øt n·ªëi ƒë·∫øn server. Vui l√≤ng th·ª≠ l·∫°i sau.")}finally{g(!1)}};return e.jsxs("div",{className:"p-6 lg:p-10 animate-fade-in h-full overflow-y-auto pb-20 relative",children:[e.jsxs("header",{className:"mb-10",children:[e.jsx("h1",{className:"text-4xl font-extrabold text-white mb-3",children:"B√°o C√°o ƒêi·ªÉm N√≥ng"}),e.jsx("p",{className:"text-slate-300 text-xl",children:"C√πng c·ªông ƒë·ªìng ph√°t hi·ªán v√† b√°o c√°o c√°c ngu·ªìn g√¢y √¥ nhi·ªÖm"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8",children:[e.jsxs("div",{className:"lg:col-span-3 bg-slate-800 rounded-3xl p-8 lg:p-10 border border-slate-700 shadow-2xl",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-8 flex items-center gap-3 border-b border-slate-700 pb-4",children:[e.jsx(b,{className:"text-orange-500",size:32}),"Th√¥ng tin ph·∫£n √°nh"]}),e.jsxs("form",{onSubmit:T,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xl font-bold text-slate-200 mb-3",children:"Khu v·ª±c (Qu·∫≠n/Huy·ªán)"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-4 top-4 text-slate-400",size:28}),e.jsx("select",{className:"w-full bg-slate-900 border border-slate-600 rounded-2xl py-4 pl-14 pr-6 text-white text-lg font-medium focus:ring-4 focus:ring-blue-500/30 focus:border-blue-500 outline-none transition-all cursor-pointer",value:s.district,onChange:t=>o({...s,district:t.target.value}),disabled:l,children:z.map(t=>e.jsx("option",{value:t.name,children:t.name},t.name))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xl font-bold text-slate-200 mb-3",children:"ƒê·ªãa ch·ªâ c·ª• th·ªÉ"}),e.jsx("input",{type:"text",className:"w-full bg-slate-900 border border-slate-600 rounded-2xl py-4 px-6 text-white text-lg focus:ring-4 focus:ring-blue-500/30 focus:border-blue-500 outline-none placeholder-slate-500 transition-all",placeholder:"V√≠ d·ª•: S·ªë 123 ƒë∆∞·ªùng Xu√¢n Th·ªßy...",value:s.address,required:!0,onChange:t=>o({...s,address:t.target.value}),disabled:l})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xl font-bold text-slate-200 mb-4",children:"Lo·∫°i h√¨nh √¥ nhi·ªÖm"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:["burning","construction","traffic","industrial","other"].map(t=>e.jsxs("button",{type:"button",disabled:l,onClick:()=>o({...s,type:t}),className:`p-6 rounded-2xl border-2 text-lg font-bold transition-all flex flex-col items-center gap-3 hover:bg-slate-700 disabled:cursor-not-allowed disabled:opacity-50
                                            ${s.type===t?{burning:"bg-red-500/20 border-red-500 text-red-400",construction:"bg-orange-500/20 border-orange-500 text-orange-400",traffic:"bg-purple-500/20 border-purple-500 text-purple-400",industrial:"bg-blue-500/20 border-blue-500 text-blue-400",other:"bg-emerald-500/20 border-emerald-500 text-emerald-400"}[t]:"bg-slate-900 border-slate-700 text-slate-400"}`,children:[e.jsx("span",{className:"text-4xl",children:{burning:"üî•",construction:"üèóÔ∏è",traffic:"üöó",industrial:"üè≠",other:"‚ùì"}[t]}),{burning:"ƒê·ªët r√°c",construction:"X√¢y d·ª±ng",traffic:"Giao th√¥ng",industrial:"C√¥ng nghi·ªáp",other:"Kh√°c"}[t]]},t))})]}),s.type==="other"&&e.jsxs("div",{className:"animate-fade-in-up",children:[e.jsxs("label",{className:"block text-xl font-bold text-emerald-400 mb-3",children:["Vui l√≤ng ghi r√µ lo·∫°i h√¨nh ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",className:"w-full bg-slate-900 border border-emerald-500/50 rounded-2xl py-4 px-6 text-white text-lg focus:ring-4 focus:ring-emerald-500/30 focus:border-emerald-500 outline-none transition-all",placeholder:"V√≠ d·ª•: M√πi h√≥a ch·∫•t l·∫°, X·∫£ th·∫£i n∆∞·ªõc ƒëen...",value:s.customType,onChange:t=>o({...s,customType:t.target.value}),disabled:l})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xl font-bold text-slate-200 mb-3",children:"M√¥ t·∫£ chi ti·∫øt"}),e.jsx("textarea",{className:"w-full bg-slate-900 border border-slate-600 rounded-2xl py-4 px-6 text-white text-lg focus:ring-4 focus:ring-blue-500/30 focus:border-blue-500 outline-none h-40 resize-none transition-all",placeholder:"M√¥ t·∫£ m·ª©c ƒë·ªô kh√≥i b·ª•i, th·ªùi gian di·ªÖn ra, ·∫£nh h∆∞·ªüng ƒë·∫øn xung quanh...",value:s.description,onChange:t=>o({...s,description:t.target.value}),disabled:l}),e.jsx("div",{className:"flex justify-end mt-1",children:e.jsxs("span",{className:`text-xs ${s.description.length<10?"text-orange-400":"text-green-400"}`,children:[s.description.length,"/10 k√Ω t·ª± t·ªëi thi·ªÉu"]})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xl font-bold text-slate-200 mb-3",children:["H√¨nh ·∫£nh/Video b·∫±ng ch·ª©ng ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"file",ref:y,className:"hidden",onChange:C,accept:"image/*,video/*",disabled:l}),c?e.jsxs("div",{className:"bg-slate-900 border border-slate-600 rounded-2xl p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{className:"text-green-400"}),e.jsx("span",{className:"text-white truncate",children:c.name})]}),e.jsx("button",{type:"button",onClick:()=>x(null),className:"p-2 text-slate-400 hover:text-white hover:bg-red-500/20 rounded-full",disabled:l,children:e.jsx(V,{size:20})})]}):e.jsxs("div",{onClick:()=>{var t;return!l&&((t=y.current)==null?void 0:t.click())},className:"border-3 border-dashed border-slate-600 rounded-2xl p-10 text-center hover:border-blue-500 hover:bg-slate-700/30 transition-all cursor-pointer group",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-700 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform",children:e.jsx(A,{size:40,className:"text-slate-400 group-hover:text-blue-400"})}),e.jsx("span",{className:"text-slate-400 font-medium text-lg",children:"Nh·∫•n ƒë·ªÉ t·∫£i l√™n ·∫£nh ho·∫∑c video"}),e.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"H·ªó tr·ª£ JPG, PNG, MP4, MOV, AVI... (T·ªëi ƒëa 50MB)"})]})]}),f&&e.jsxs("div",{className:"bg-red-500/10 border border-red-500/50 p-4 rounded-xl flex items-center gap-3 text-red-300",children:[e.jsx(b,{size:24}),e.jsx("span",{children:f})]}),j&&e.jsxs("div",{className:"bg-green-500/10 border border-green-500/50 p-4 rounded-xl flex items-center gap-3 text-green-300",children:[e.jsx(w,{size:24}),e.jsx("span",{children:j})]}),e.jsx("button",{type:"submit",disabled:l,className:`w-full py-5 rounded-2xl font-bold text-xl flex items-center justify-center gap-3 transition-all shadow-lg hover:shadow-blue-500/40 active:scale-[0.98] text-invariant-white
                                ${l?"bg-slate-700 text-slate-400 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 text-white"}`,children:l?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"animate-spin"})," ƒêang G·ª≠i B√°o C√°o..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{size:24})," G·ª≠i B√°o C√°o Ngay"]})})]})]}),e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-br from-blue-900/50 to-slate-900 p-8 rounded-3xl border border-blue-500/30 shadow-xl",children:[e.jsxs("h3",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-3",children:[e.jsx(w,{className:"text-blue-400",size:28}),"Quy Tr√¨nh X·ª≠ L√Ω"]}),e.jsxs("div",{className:"space-y-6 relative",children:[e.jsx("div",{className:"absolute left-[19px] top-2 bottom-4 w-0.5 bg-slate-700"}),e.jsxs("div",{className:"flex gap-4 relative z-10",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center flex-shrink-0 font-bold text-white shadow-lg border-4 border-slate-900",children:"1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white text-lg",children:"Ti·∫øp nh·∫≠n"}),e.jsx("p",{className:"text-slate-400 text-base",children:"H·ªá th·ªëng ghi nh·∫≠n th√¥ng tin v√† h√¨nh ·∫£nh t·ª´ b·∫°n."})]})]}),e.jsxs("div",{className:"flex gap-4 relative z-10",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center flex-shrink-0 font-bold text-slate-300 border-4 border-slate-900",children:"2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-200 text-lg",children:"X√°c minh"}),e.jsx("p",{className:"text-slate-400 text-base",children:"Admin ki·ªÉm tra t√≠nh x√°c th·ª±c c·ªßa b√°o c√°o (trong 24h)."})]})]}),e.jsxs("div",{className:"flex gap-4 relative z-10",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center flex-shrink-0 font-bold text-slate-300 border-4 border-slate-900",children:"3"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-200 text-lg",children:"X·ª≠ l√Ω"}),e.jsx("p",{className:"text-slate-400 text-base",children:"G·ª≠i th√¥ng b√°o t·ªõi c∆° quan ch·ª©c nƒÉng ƒë·ªÉ x·ª≠ l√Ω vi ph·∫°m."})]})]})]})]})})]}),k&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-slate-800 rounded-3xl p-8 max-w-md w-full border border-slate-700 shadow-2xl animate-scale-in",children:[e.jsxs("div",{className:"mb-6 flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500/20 rounded-full flex items-center justify-center mb-4",children:e.jsx(b,{size:32,className:"text-blue-400"})}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"X√°c nh·∫≠n g·ª≠i b√°o c√°o?"}),e.jsx("p",{className:"text-slate-300",children:"Th√¥ng tin c·ªßa b·∫°n s·∫Ω ƒë∆∞·ª£c g·ª≠i ƒë·∫øn Ban qu·∫£n tr·ªã ƒë·ªÉ x√°c minh. B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën ti·∫øp t·ª•c?"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>h(!1),className:"flex-1 py-3 rounded-xl font-bold text-slate-300 bg-slate-700 hover:bg-slate-600 transition-colors",children:"H·ªßy b·ªè"}),e.jsx("button",{type:"button",onClick:S,className:"flex-1 py-3 rounded-xl font-bold text-white bg-blue-600 hover:bg-blue-500 shadow-lg shadow-blue-500/30 transition-all",children:"X√°c nh·∫≠n"})]})]})})]})};export{q as default};
